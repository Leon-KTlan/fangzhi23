éå¸¸å¥½ï¼ä»¥ä¸‹æ˜¯ã€ŠSolidity å¿«é€Ÿå…¥é—¨æ•™ç¨‹ã€‹**ç¬¬ä¸€éƒ¨åˆ†ï¼šåŒºå—é“¾ä¸æ™ºèƒ½åˆçº¦æ¦‚è¿°** çš„è¯¦ç»†å†…å®¹ï¼Œé‡‡ç”¨**æ•™æé£æ ¼**ç¼–å†™ï¼Œé€‚åˆåˆå­¦è€…ç³»ç»Ÿå­¦ä¹ ã€‚è¯­è¨€é€šä¿—æ˜“æ‡‚ï¼Œé€»è¾‘æ¸…æ™°ï¼Œä¾¿äºç†è§£ã€‚

---

# ğŸ“˜ ç¬¬ä¸€éƒ¨åˆ†ï¼šåŒºå—é“¾ä¸æ™ºèƒ½åˆçº¦æ¦‚è¿°

## ç¬¬1ç« ï¼šä»€ä¹ˆæ˜¯æ™ºèƒ½åˆçº¦ï¼Ÿ

åœ¨å¼€å§‹å­¦ä¹  Solidity ç¼–ç¨‹è¯­è¨€ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µ â€”â€” **æ™ºèƒ½åˆçº¦ï¼ˆSmart Contractï¼‰**ã€‚å®ƒæ˜¯ Solidity è¯ç”Ÿçš„æ ¸å¿ƒç›®çš„å’Œä½¿ç”¨åœºæ™¯ã€‚

---

### 1.1 åŒºå—é“¾çš„åŸºæœ¬æ¦‚å¿µå›é¡¾

**åŒºå—é“¾ï¼ˆBlockchainï¼‰** æ˜¯ä¸€ç§å»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯ã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š

- **å»ä¸­å¿ƒåŒ–**ï¼šæ²¡æœ‰ä¸­å¤®æœåŠ¡å™¨æˆ–æƒå¨æœºæ„æ§åˆ¶ã€‚
- **ä¸å¯ç¯¡æ”¹æ€§**ï¼šä¸€æ—¦æ•°æ®å†™å…¥åŒºå—é“¾ï¼Œå°±å‡ ä¹æ— æ³•è¢«ä¿®æ”¹æˆ–åˆ é™¤ã€‚
- **é€æ˜å¯è¿½æº¯**ï¼šæ‰€æœ‰äº¤æ˜“è®°å½•å¯¹ç½‘ç»œå‚ä¸è€…å…¬å¼€å¯è§ã€‚

å¸¸è§çš„åŒºå—é“¾å¹³å°æœ‰ï¼š
- **Bitcoinï¼ˆæ¯”ç‰¹å¸ï¼‰**ï¼šä¸»è¦ç”¨äºåŠ å¯†è´§å¸è½¬è´¦ã€‚
- **Ethereumï¼ˆä»¥å¤ªåŠï¼‰**ï¼šä¸ä»…æ”¯æŒè½¬è´¦ï¼Œè¿˜æ”¯æŒè¿è¡Œç¨‹åºï¼ˆå³æ™ºèƒ½åˆçº¦ï¼‰ã€‚

> âœ… æˆ‘ä»¬å°†åœ¨ Ethereum ä¸Šå¼€å‘æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ã€‚ 

**web3.0**

Web3ï¼Œä¹Ÿè¢«ç§°ä¸ºWeb 3.0ï¼Œæ˜¯æŒ‡äº’è”ç½‘çš„ä¸‹ä¸€ä»£æ¨¡å‹ï¼Œå®ƒåŸºäºåŒºå—é“¾æŠ€æœ¯ã€å»ä¸­å¿ƒåŒ–åè®®å’Œå…¶ä»–å‰æ²¿ç§‘æŠ€ï¼Œæ—¨åœ¨åˆ›å»ºä¸€ä¸ªæ›´åŠ æ°‘ä¸»åŒ–ã€å®‰å…¨å’Œé€æ˜çš„ç½‘ç»œä¸–ç•Œã€‚ä¸å½“å‰çš„Web 2.0ç›¸æ¯”ï¼Œå…¶ä¸­å°‘æ•°å¤§å‹ç§‘æŠ€å…¬å¸æŒæ¡ç€å¤§é‡çš„ç”¨æˆ·æ•°æ®å’Œæ§åˆ¶æƒï¼ŒWeb3çš„ç›®æ ‡æ˜¯é€šè¿‡å»ä¸­å¿ƒåŒ–æ¥åˆ†æ•£è¿™ç§æƒåŠ›ï¼Œè®©ç”¨æˆ·å¯¹è‡ªå·±çš„æ•°æ®æ‹¥æœ‰æ›´å¤šçš„æ§åˆ¶ã€‚

Web3çš„æ ¸å¿ƒç‰¹ç‚¹åŒ…æ‹¬ï¼š

1. **å»ä¸­å¿ƒåŒ–**ï¼šåˆ©ç”¨åŒºå—é“¾æŠ€æœ¯ï¼ŒWeb3æ”¯æŒå»ä¸­å¿ƒåŒ–çš„åº”ç”¨ç¨‹åºï¼ˆDAppsï¼‰ï¼Œè¿™äº›åº”ç”¨ä¸ä¾èµ–äºä»»ä½•å•ä¸€çš„æ§åˆ¶å®ä½“ã€‚æ¯”ç‰¹å¸å’Œä»¥å¤ªåŠç­‰å¹³å°å±•ç¤ºäº†å¦‚ä½•åœ¨æ²¡æœ‰ä¸­å¤®æœºæ„çš„æƒ…å†µä¸‹è¿è¡Œé‡‘èæœåŠ¡ã€‚

2. **ä¿¡ä»»ä¸é€æ˜åº¦**ï¼šç”±äºåŒºå—é“¾ä¸Šçš„æ‰€æœ‰äº¤æ˜“éƒ½æ˜¯å…¬å¼€ä¸”ä¸å¯ç¯¡æ”¹çš„ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„é€æ˜åº¦ï¼ŒåŒæ—¶å‡å°‘äº†æ¬ºè¯ˆè¡Œä¸ºçš„å¯èƒ½æ€§ã€‚æ™ºèƒ½åˆçº¦è¿›ä¸€æ­¥å¢å¼ºäº†è‡ªåŠ¨åŒ–ä¿¡ä»»æœºåˆ¶ï¼Œå…è®¸åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡ŒåˆåŒæ¡æ¬¾ã€‚

3. **ç”¨æˆ·ä¸»æƒ**ï¼šåœ¨Web3ä¸­ï¼Œç”¨æˆ·è€Œéå…¬å¸ï¼Œæ‹¥æœ‰å¹¶æ§åˆ¶è‡ªå·±çš„æ•°æ®ã€‚ä¸ªäººå¯ä»¥é€šè¿‡åŠ å¯†æŠ€æœ¯ä¿æŠ¤å…¶éšç§ï¼Œå¹¶é€‰æ‹©ä½•æ—¶ä»¥åŠå¦‚ä½•åˆ†äº«ä¿¡æ¯ã€‚

4. **å¼€æ”¾æ ‡å‡†å’Œäº’æ“ä½œæ€§**ï¼šWeb3ä¿ƒè¿›äº†ä¸åŒæœåŠ¡ä¹‹é—´çš„äº’æ“ä½œæ€§å’Œè¿æ¥æ€§ï¼Œä½¿å¾—å„ç§åº”ç”¨å’ŒæœåŠ¡èƒ½å¤Ÿæ›´è½»æ¾åœ°ååŒå·¥ä½œã€‚è¿™ç§å¼€æ”¾æ€§é¼“åŠ±äº†åˆ›æ–°ï¼Œå¹¶ä¸ºå¼€å‘è€…æä¾›äº†æ„å»ºå¤æ‚è§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚

5. **ç»æµæ¿€åŠ±æ¨¡å‹**ï¼šé€šè¿‡ä»£å¸åŒ–å’Œåˆ†å¸ƒå¼é‡‘èï¼ˆDeFiï¼‰é¡¹ç›®ï¼ŒWeb3æä¾›äº†ä¸€ç§æ–°å‹çš„ç»æµä½“ç³»ï¼Œåœ¨è¿™ä¸ªä½“ç³»ä¸­ï¼Œå‚ä¸è€…å¯ä»¥é€šè¿‡è´¡çŒ®èµ„æºæˆ–å‚ä¸æ²»ç†è·å¾—å¥–åŠ±ã€‚

Web3ä¸ä»…ä»…æ˜¯æŠ€æœ¯ä¸Šçš„è¿›æ­¥ï¼Œå®ƒè¿˜ä»£è¡¨äº†ä¸€ç§ç¤¾ä¼šå˜é©ï¼Œå¼ºè°ƒä¸ªä½“æƒåˆ©ã€ç¤¾åŒºæ²»ç†ä»¥åŠå¯¹é›†ä¸­å¼æƒå¨ç»“æ„çš„æŒ‘æˆ˜ã€‚éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒWeb3æœ‰æœ›æ”¹å˜æˆ‘ä»¬åœ¨çº¿äº¤äº’çš„æ–¹å¼ï¼Œä»ç¤¾äº¤ç½‘ç»œåˆ°ç”µå­å•†åŠ¡ï¼Œå†åˆ°æ•°å­—èº«ä»½ç®¡ç†ç­‰å¤šä¸ªé¢†åŸŸã€‚

---

### 1.2 æ™ºèƒ½åˆçº¦çš„å®šä¹‰ä¸ä½œç”¨

**æ™ºèƒ½åˆçº¦** æ˜¯ä¸€æ®µè‡ªåŠ¨æ‰§è¡Œçš„ç¨‹åºä»£ç ï¼Œå®ƒå­˜åœ¨äºåŒºå—é“¾ä¸Šï¼Œå¯ä»¥åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œé¢„è®¾çš„æ“ä½œã€‚

#### ç®€å•æ¥è¯´ï¼š

> æ™ºèƒ½åˆçº¦ = â€œä»£ç  + è‡ªåŠ¨æ‰§è¡Œ + å»ä¿¡ä»»ç¯å¢ƒâ€

#### ä¸¾ä¸ªä¾‹å­ï¼š

å‡è®¾ä½ æƒ³ä¹°ä¸€ä»¶å•†å“ï¼Œä½†ä½ ä¸æƒ³å…ˆä»˜æ¬¾ï¼Œå–å®¶ä¹Ÿä¸æƒ³å…ˆå‘è´§ã€‚ä½ ä»¬å¯ä»¥ç­¾è®¢ä¸€ä¸ªâ€œæ™ºèƒ½åˆçº¦â€ï¼š

- ä½ å…ˆæŠŠé’±æ‰“åˆ°åˆçº¦é‡Œï¼›
- åˆçº¦ä¼šç­‰ä½ ç¡®è®¤æ”¶è´§åï¼Œå†æŠŠé’±è½¬ç»™å–å®¶ï¼›
- å¦‚æœä½ æ²¡æ”¶åˆ°è´§ï¼Œé’±ä¼šé€€è¿˜ç»™ä½ ã€‚

è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ç¬¬ä¸‰æ–¹ä»‹å…¥ï¼Œåˆçº¦ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚

---

### 1.3 Ethereum å’Œ EVM ç®€ä»‹

**Ethereumï¼ˆä»¥å¤ªåŠï¼‰** æ˜¯ä¸€ä¸ªå¼€æºçš„åŒºå—é“¾å¹³å°ï¼Œå…è®¸å¼€å‘è€…åœ¨å…¶ä¸Šæ„å»ºå’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦ã€‚

#### æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼š

| ç»„ä»¶                    | åŠŸèƒ½                                |
| ----------------------- | ----------------------------------- |
| **ä»¥å¤ªå¸ï¼ˆETHï¼‰**       | å¹³å°å†…çš„åŸç”Ÿä»£å¸ï¼Œç”¨äºæ”¯ä»˜ Gas è´¹ç”¨ |
| **è´¦æˆ·ç³»ç»Ÿ**            | æ”¯æŒå¤–éƒ¨è´¦æˆ·ï¼ˆç”¨æˆ·é’±åŒ…ï¼‰å’Œåˆçº¦è´¦æˆ·  |
| **EVMï¼ˆä»¥å¤ªåŠè™šæ‹Ÿæœºï¼‰** | æ‰§è¡Œæ™ºèƒ½åˆçº¦ä»£ç çš„â€œè™šæ‹Ÿè®¡ç®—æœºâ€      |

#### å…³äº EVMï¼š
- å®ƒæ˜¯å…¨çƒå…±äº«çš„è®¡ç®—å¼•æ“ã€‚
- æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¿è¡Œ EVM æ¥éªŒè¯äº¤æ˜“ã€‚
- Solidity ç¼–å†™çš„åˆçº¦ä¼šè¢«ç¼–è¯‘æˆ EVM å¯æ‰§è¡Œçš„å­—èŠ‚ç ã€‚

---

### 1.4 Gas è´¹ç”¨æ¨¡å‹ç®€ä»‹

åœ¨ Ethereum ä¸Šæ‰§è¡Œä»»ä½•æ“ä½œéƒ½éœ€è¦æ¶ˆè€—ä¸€å®šçš„èµ„æºï¼Œæ¯”å¦‚å­˜å‚¨ã€è®¡ç®—ã€å¸¦å®½ç­‰ã€‚ä¸ºäº†é˜²æ­¢æ»¥ç”¨å’Œæ¿€åŠ±çŸ¿å·¥/éªŒè¯è€…ï¼Œå¼•å…¥äº† **Gasï¼ˆæ±½æ²¹è´¹ï¼‰** æœºåˆ¶ã€‚

#### Gas çš„å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š

| åç§°          | å«ä¹‰                                  |
| ------------- | ------------------------------------- |
| **Gas Limit** | ä¸€æ¬¡æ“ä½œæœ€å¤šæ„¿æ„ä½¿ç”¨çš„ Gas æ•°é‡       |
| **Gas Price** | æ¯å•ä½ Gas çš„ä»·æ ¼ï¼ˆä»¥ Gwei ä¸ºå•ä½ï¼‰   |
| **Gas Cost**  | å®é™…èŠ±è´¹çš„ Gas = Gas Used Ã— Gas Price |
| **Gas Used**  | å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨çš„ Gas æ•°é‡         |

#### ç¤ºä¾‹è¯´æ˜ï¼š

å¦‚æœä½ å‘é€ä¸€ç¬”äº¤æ˜“ï¼š
- Gas Limit = 21000
- Gas Price = 20 Gweiï¼ˆå³ 0.00000002 ETHï¼‰
- é‚£ä¹ˆä½ å°†æ”¯ä»˜ï¼š21000 Ã— 0.00000002 = 0.00042 ETH

> âš ï¸ åœ¨ç¼–å†™æ™ºèƒ½åˆçº¦æ—¶ï¼Œè¦å°½é‡ä¼˜åŒ–ä»£ç ï¼Œå‡å°‘ Gas æ¶ˆè€—ã€‚

#### âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½® Gas Limitï¼Ÿ

å› ä¸ºæ™ºèƒ½åˆçº¦çš„æ‰§è¡Œå¯èƒ½å¾ˆå¤æ‚ï¼Œç”šè‡³å‡ºç°æ­»å¾ªç¯ã€‚ä¸ºäº†é˜²æ­¢æ— é™æ‰§è¡Œè€—å°½ç³»ç»Ÿèµ„æºï¼ŒEthereum è®¾å®šäº† Gas Limitï¼š

- å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­ Gas Used è¶…è¿‡äº† Gas Limitï¼š
  - äº¤æ˜“å¤±è´¥ï¼ˆout of gasï¼‰
  - çŠ¶æ€å›æ»šï¼ˆå°±åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼‰
  - **ä½†æ˜¯ Gas ä¸ä¼šé€€è¿˜ï¼**

æ‰€ä»¥ï¼š**Gas Limit æ˜¯ä½ ä¸ºè¿™æ¬¡äº¤æ˜“è®¾å®šçš„â€œé¢„ç®—ä¸Šé™â€ï¼Œä¸æ˜¯å®é™…èŠ±è´¹ã€‚**
---



### 1.5 Solidity åœ¨æ•´ä¸ªç”Ÿæ€ä¸­çš„å®šä½

**Solidity** æ˜¯ä¸€ç§é¢å‘æ™ºèƒ½åˆçº¦çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œä¸“ä¸º Ethereum è®¾è®¡ã€‚å®ƒæ˜¯ç›®å‰æœ€ä¸»æµçš„æ™ºèƒ½åˆçº¦å¼€å‘è¯­è¨€ä¹‹ä¸€ã€‚

#### Solidity çš„ç‰¹ç‚¹ï¼š

| ç‰¹ç‚¹               | è¯´æ˜                             |
| ------------------ | -------------------------------- |
| ç±» JavaScript è¯­æ³• | æ˜“äºå­¦ä¹ å’Œä½¿ç”¨                   |
| æ”¯æŒé¢å‘å¯¹è±¡ç‰¹æ€§   | æ”¯æŒç»§æ‰¿ã€æ¥å£ã€åº“ç­‰ç»“æ„         |
| ä¸“æ³¨äºåˆçº¦é€»è¾‘     | ä¸åƒä¼ ç»Ÿè¯­è¨€é‚£æ ·å¤„ç†æ–‡ä»¶ã€ç½‘ç»œç­‰ |
| å¼ºç±»å‹è¯­è¨€         | æ›´å®‰å…¨ï¼Œé¿å…ä½çº§é”™è¯¯             |

#### Solidity çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š

- å‘è¡Œä»£å¸ï¼ˆå¦‚ ERC-20ã€ERC-721ï¼‰
- æ„å»º DeFi åè®®ï¼ˆå¦‚å€Ÿè´·ã€äº¤æ˜“æ‰€ï¼‰
  - DeFi åè®®åˆ©ç”¨æ™ºèƒ½åˆçº¦å®ç°é‡‘èæœåŠ¡è‡ªåŠ¨åŒ–ï¼Œæ— éœ€ä¼ ç»Ÿé‡‘èæœºæ„çš„å‚ä¸ã€‚

- NFTï¼ˆæ•°å­—è—å“ï¼‰
  - NFT å¯ä»¥ç”¨æ¥ä»£è¡¨ç‹¬ä¸€æ— äºŒçš„ç‰©å“ï¼Œå¦‚è‰ºæœ¯å“ã€éŸ³ä¹ä½œå“æˆ–è™šæ‹Ÿåœ°äº§ã€‚

- DAOï¼ˆå»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ï¼‰
  - DAO ä½¿ç”¨æ™ºèƒ½åˆçº¦æ¥ç®¡ç†ç»„ç»‡è§„åˆ™å’Œèµ„é‡‘ï¼Œæ‰€æœ‰å†³ç­–éƒ½é€šè¿‡æˆå‘˜æŠ•ç¥¨è¾¾æˆå…±è¯†ã€‚


ERC-20ã€ERC-721ç­‰ä»£å¸æ ‡å‡†å®è´¨ä¸Šæ˜¯ä¸€ç³»åˆ—å®šä¹‰äº†æ™ºèƒ½åˆçº¦å¿…é¡»å®ç°çš„æ¥å£å’Œäº‹ä»¶çš„è§„èŒƒã€‚é€šè¿‡å®ç°è¿™äº›è§„èŒƒï¼Œæ™ºèƒ½åˆçº¦å¯ä»¥ç¡®ä¿ä¸å…¶ä»–åˆçº¦ã€é’±åŒ…ä»¥åŠå»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppsï¼‰ä¹‹é—´çš„å…¼å®¹æ€§ã€‚è¿™æ„å‘³ç€åªè¦ä¸€ä¸ªåˆçº¦å®ç°äº†ç‰¹å®šçš„æ ‡å‡†æ¥å£ï¼Œå®ƒå°±å¯ä»¥è¢«è¯†åˆ«ä¸ºè¯¥ç±»å‹çš„ä»£å¸ï¼Œå¹¶èƒ½å¤Ÿä¸æ”¯æŒè¯¥æ ‡å‡†çš„å…¶ä»–ç³»ç»Ÿäº’æ“ä½œã€‚
ERC-20 æ˜¯ä»¥å¤ªåŠä¸Šç”¨äºåŒè´¨åŒ–ä»£å¸çš„ä¸€ä¸ªæŠ€æœ¯æ ‡å‡†ã€‚åŒè´¨åŒ–æ„å‘³ç€æ¯ä¸ªå•ä½çš„ä»£å¸éƒ½æ˜¯ç›¸åŒçš„ä¸”å¯äº’æ¢çš„ã€‚ERC-20 å®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¦‚ä½•è½¬ç§»ä»£å¸å’Œå¦‚ä½•æ‰¹å‡†èŠ±è´¹ä»£å¸ã€‚
ERC-721 åˆ™æ˜¯ç”¨æ¥å®šä¹‰éåŒè´¨åŒ–ä»£å¸ï¼ˆNFTsï¼‰çš„æ ‡å‡†ã€‚æ¯ä¸ª ERC-721 ä»£å¸ä»£è¡¨ç‹¬ä¸€æ— äºŒçš„èµ„äº§ï¼Œå› æ­¤å®ƒä»¬ä¸å¯äº’æ¢ã€‚é™¤äº†åŸºæœ¬çš„è½¬è´¦åŠŸèƒ½å¤–ï¼ŒERC-721 è¿˜éœ€è¦æä¾›å…³äºæ¯ä¸ªä»£å¸æ‰€æœ‰æƒå’Œå…ƒæ•°æ®çš„ä¿¡æ¯ã€‚



---

# ğŸ“˜ ç¬¬äºŒéƒ¨åˆ†ï¼šç¯å¢ƒæ­å»ºä¸ç¬¬ä¸€ä¸ªåˆçº¦

## ç¬¬2ç« ï¼šå¼€å‘ç¯å¢ƒå‡†å¤‡

åœ¨å¼€å§‹ç¼–å†™æ™ºèƒ½åˆçº¦ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ­å»ºä¸€ä¸ªåˆé€‚çš„å¼€å‘ç¯å¢ƒã€‚æœ¬ç« èŠ‚å°†ä»‹ç»å¦‚ä½•å®‰è£…å¿…è¦çš„å·¥å…·ï¼Œå¹¶åˆ›å»ºç¬¬ä¸€ä¸ª Truffle é¡¹ç›®ã€‚

### 2.1 å®‰è£… Node.js å’Œ npm

Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œæ—¶ï¼Œè€Œ npmï¼ˆNode Package Managerï¼‰æ˜¯å…¶é»˜è®¤çš„åŒ…ç®¡ç†å™¨ã€‚Truffle æ¡†æ¶ä¾èµ–äº Node.js å’Œ npm æ¥è¿è¡Œã€‚

#### å®‰è£…æ­¥éª¤ï¼š

1. **ä¸‹è½½å¹¶å®‰è£… Node.js**ï¼š
   - è®¿é—® [Node.js å®˜æ–¹ç½‘ç«™](https://nodejs.org/) ä¸‹è½½é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚
   - å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨å®‰è£… npmã€‚

2. **éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ**ï¼š
   æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚ Terminal æˆ– Command Promptï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç‰ˆæœ¬å·ï¼š
   ```bash
   node -v
   npm -v
   ```
   å¦‚æœæ˜¾ç¤ºäº†ç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚

### 2.2 å®‰è£… Truffle

Truffle æ˜¯ä¸€ä¸ªæµè¡Œçš„ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¼€å‘æ¡†æ¶ï¼Œå®ƒç®€åŒ–äº†åˆçº¦çš„ç¼–è¯‘ã€éƒ¨ç½²å’Œæµ‹è¯•è¿‡ç¨‹ã€‚

#### å®‰è£…æ­¥éª¤ï¼š

1. **å…¨å±€å®‰è£… Truffle**ï¼š
   åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   npm install -g truffle
   ```

2. **éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ**ï¼š
   è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Truffle ç‰ˆæœ¬ï¼š
   ```bash
   truffle version
   ```
   å¦‚æœæ˜¾ç¤ºäº†ç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚

### 2.3 å®‰è£… Ganache

Ganache æ˜¯ä¸€ä¸ªä¸ªäººä»¥å¤ªåŠåŒºå—é“¾ï¼Œç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯•æ™ºèƒ½åˆçº¦ã€‚

#### å®‰è£…æ­¥éª¤ï¼š

1. **ä¸‹è½½å¹¶å®‰è£… Ganache**ï¼š
   - è®¿é—® [Ganache å®˜æ–¹ç½‘ç«™](https://trufflesuite.com/ganache/) ä¸‹è½½é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚
   - å®‰è£…å®Œæˆåå¯åŠ¨ Ganacheï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ¨¡æ‹Ÿçš„åŒºå—é“¾ç½‘ç»œï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæœ‰ 10 ä¸ªé¢„è®¾è´¦æˆ·ï¼Œæ¯ä¸ªè´¦æˆ·æœ‰ 100 ETHã€‚

2. **æŸ¥çœ‹ Ganache æä¾›çš„ RPC ç«¯å£**ï¼š
   é»˜è®¤æƒ…å†µä¸‹ï¼ŒGanache ä½¿ç”¨ `http://127.0.0.1:7545` ä½œä¸º RPC ç«¯å£ï¼Œè¿™æ˜¯ Truffle è¿æ¥æœ¬åœ°åŒºå—é“¾çš„æ–¹å¼ã€‚

### 2.4 åˆ›å»ºç¬¬ä¸€ä¸ª Truffle é¡¹ç›®

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½æ‰€æœ‰å·¥å…·ï¼Œæ¥ä¸‹æ¥åˆ›å»ºç¬¬ä¸€ä¸ª Truffle é¡¹ç›®ã€‚

#### åˆ›å»ºæ­¥éª¤ï¼š

1. **åˆå§‹åŒ–æ–°é¡¹ç›®**ï¼š
   åœ¨å‘½ä»¤è¡Œä¸­é€‰æ‹©ä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ Truffle é¡¹ç›®ï¼š
   ```bash
   mkdir my-first-project
   cd my-first-project
   truffle init
   ```

2. **é¡¹ç›®ç»“æ„**ï¼š
   åˆå§‹åŒ–å®Œæˆåï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š
   ```
   my-first-project/
   â”œâ”€â”€ contracts/        # å­˜æ”¾æ™ºèƒ½åˆçº¦æ–‡ä»¶
   â”œâ”€â”€ migrations/       # å­˜æ”¾è¿ç§»è„šæœ¬
   â”œâ”€â”€ test/             # å­˜æ”¾æµ‹è¯•æ–‡ä»¶
   â””â”€â”€ truffle-config.js # Truffle é…ç½®æ–‡ä»¶
   ```

## ç¬¬3ç« ï¼šç¼–å†™å¹¶éƒ¨ç½²ç¬¬ä¸€ä¸ªåˆçº¦

ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†åŸºæœ¬çš„å¼€å‘ç¯å¢ƒï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ç¼–å†™å¹¶éƒ¨ç½²æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ™ºèƒ½åˆçº¦ã€‚

### 3.1 Remix å¿«é€Ÿä½“éªŒ

Remix æ˜¯ä¸€ä¸ªåœ¨çº¿çš„ Solidity IDEï¼Œéå¸¸é€‚åˆåˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹ã€‚

#### ä½¿ç”¨æ­¥éª¤ï¼š

1. **è®¿é—® Remix**ï¼š
   æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® [Remix åœ¨çº¿ç¼–è¾‘å™¨](https://remix.ethereum.org)ã€‚

2. **ç¼–å†™ç®€å•åˆçº¦**ï¼š
   åœ¨å·¦ä¾§çš„â€œcontractsâ€é¢æ¿ä¸­ç‚¹å‡»â€œ+â€æŒ‰é’®ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ `Storage.sol`ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š
   
   ```solidity
   pragma solidity ^0.8.0;
   
   contract Storage {
       uint256 number;
   
       function store(uint256 num) public {
           number = num;
       }
   
       function retrieve() public view returns (uint256) {
           return number;
       }
   }
   ```
   
3. **ç¼–è¯‘åˆçº¦**ï¼š
   åœ¨å³ä¾§çš„â€œCompileâ€é€‰é¡¹å¡ä¸­ï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„ `Storage.sol` æ–‡ä»¶ï¼Œç‚¹å‡»â€œCompileâ€æŒ‰é’®è¿›è¡Œç¼–è¯‘ã€‚

4. **éƒ¨ç½²åˆçº¦**ï¼š
   åˆ‡æ¢åˆ°â€œDeploy & Run Transactionsâ€é€‰é¡¹å¡ï¼Œé€‰æ‹©â€œJavaScript VMâ€ä½œä¸ºç¯å¢ƒï¼Œç‚¹å‡»â€œDeployâ€æŒ‰é’®éƒ¨ç½²åˆçº¦ã€‚

5. **äº¤äº’æµ‹è¯•**ï¼š
   éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥è°ƒç”¨åˆçº¦çš„æ–¹æ³• `store()` å’Œ `retrieve()` æ¥å­˜å‚¨å’Œè¯»å–æ•°æ®ã€‚

### 3.2 Truffle é¡¹ç›®ç»“æ„è¯¦è§£

å›åˆ°æˆ‘ä»¬çš„ Truffle é¡¹ç›®ï¼Œäº†è§£å…¶ç»“æ„æœ‰åŠ©äºæ›´å¥½åœ°ç»„ç»‡ä»£ç ã€‚

#### ä¸»è¦ç›®å½•è§£é‡Šï¼š

- **contracts/**ï¼šå­˜æ”¾æ™ºèƒ½åˆçº¦æ–‡ä»¶ã€‚
- **migrations/**ï¼šå­˜æ”¾è¿ç§»è„šæœ¬ï¼Œç”¨äºéƒ¨ç½²åˆçº¦ã€‚
- **test/**ï¼šå­˜æ”¾æµ‹è¯•æ–‡ä»¶ï¼Œç”¨äºå•å…ƒæµ‹è¯•ã€‚
- **truffle-config.js**ï¼šé…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ç½‘ç»œé…ç½®ç­‰ä¿¡æ¯ã€‚

### 3.3 ç¼–å†™ `Storage.sol` åˆçº¦

åœ¨ `contracts/` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `Storage.sol` çš„æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract Storage {
    uint256 number;

    function store(uint256 num) public {
        number = num;
    }

    function retrieve() public view returns (uint256) {
        return number;
    }
}
```

### 3.4 ä½¿ç”¨ Truffle è¿ç§»è„šæœ¬éƒ¨ç½²åˆçº¦

ä¸ºäº†éƒ¨ç½²åˆçº¦ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™è¿ç§»è„šæœ¬ã€‚

#### åˆ›å»ºè¿ç§»è„šæœ¬ï¼š

1. **åœ¨ `migrations/` ç›®å½•ä¸‹åˆ›å»º `2_deploy_contracts.js` æ–‡ä»¶**ï¼š
   ```javascript
   const Storage = artifacts.require("Storage");
   
   module.exports = function(deployer) {
     deployer.deploy(Storage);
   };
   ```

2. **ä¿®æ”¹ `truffle-config.js` æ–‡ä»¶**ï¼Œç¡®ä¿è¿æ¥åˆ° Ganacheï¼š
   
   ```javascript
   module.exports = {
     networks: {
       development: {
         host: "127.0.0.1",
         port: 7545,
         network_id: "*", // Match any network id
       },
     },
     compilers: {
       solc: {
         version: "^0.8.0",
       },
     },
   };
   ```

### 3.5 ä½¿ç”¨ Truffle Console ä¸åˆçº¦äº¤äº’

éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Truffle Console ä¸åˆçº¦è¿›è¡Œäº¤äº’ã€‚

#### æ­¥éª¤ï¼š

1. **ç¼–è¯‘åˆçº¦**ï¼š
   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š
   ```bash
   truffle compile
   ```

2. **éƒ¨ç½²åˆçº¦**ï¼š
   è¿è¡Œä»¥ä¸‹å‘½ä»¤éƒ¨ç½²åˆçº¦ï¼š
   ```bash
   truffle migrate --network development
   ```

3. **æ‰“å¼€ Truffle Console**ï¼š
   è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›å…¥ Truffle Consoleï¼š
   ```bash
   truffle console
   ```

4. **ä¸åˆçº¦äº¤äº’**ï¼š
   åœ¨æ§åˆ¶å°ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
   ```javascript
   let instance = await Storage.deployed()
   await instance.store(42)
   let value = await instance.retrieve()
   console.log(value.toString()) // è¾“å‡º 42
   ```

å¥½çš„ï¼Œè®©æˆ‘ä»¬ç»§ç»­æ·±å…¥å­¦ä¹  Solidity çš„åŸºç¡€è¯­æ³•å’Œåˆçº¦ç‰¹æ€§ã€‚è¿™éƒ¨åˆ†å†…å®¹å°†å¸®åŠ©ä½ æŒæ¡ç¼–å†™æ™ºèƒ½åˆçº¦æ‰€éœ€çš„åŸºæœ¬æŠ€èƒ½ï¼Œå¹¶ç†è§£ Solidity è¯­è¨€çš„ç‹¬ç‰¹ä¹‹å¤„ã€‚

---

# ğŸ“˜ ç¬¬ä¸‰éƒ¨åˆ†ï¼šSolidity åŸºç¡€è¯­æ³•ä¸åˆçº¦ç‰¹æ€§

## ç¬¬4ç« ï¼šå˜é‡ä¸æ•°æ®ç±»å‹

åœ¨ Solidity ä¸­ï¼Œå˜é‡ç”¨äºå­˜å‚¨çŠ¶æ€ä¿¡æ¯ï¼Œè€Œæ•°æ®ç±»å‹å†³å®šäº†è¿™äº›å˜é‡å¯ä»¥å­˜å‚¨çš„æ•°æ®ç§ç±»ã€‚Solidity æ”¯æŒå¤šç§åŸºæœ¬æ•°æ®ç±»å‹å’Œå¤æ‚æ•°æ®ç»“æ„ã€‚

### 4.1 åŸºæœ¬ç±»å‹

#### æ•´æ•°ç±»å‹ï¼š
- `uint` å’Œ `int`ï¼šåˆ†åˆ«è¡¨ç¤ºæ— ç¬¦å·æ•´æ•°å’Œæœ‰ç¬¦å·æ•´æ•°ã€‚
  - `uint8`, `uint16`, ..., `uint256`ï¼šä» 8 åˆ° 256 ä½çš„æ— ç¬¦å·æ•´æ•°ã€‚
  - `int8`, `int16`, ..., `int256`ï¼šä» 8 åˆ° 256 ä½çš„æœ‰ç¬¦å·æ•´æ•°ã€‚

```solidity
uint public myUint = 10;
int public myInt = -10;
```

#### åœ°å€ç±»å‹ï¼š
- `address`ï¼šç”¨äºå­˜å‚¨ä»¥å¤ªåŠè´¦æˆ·åœ°å€ã€‚
  - `address payable`ï¼šå¯æ¥æ”¶ä»¥å¤ªå¸çš„åœ°å€ã€‚

```solidity
address public owner;
address payable public receiver;
```

#### å¸ƒå°”ç±»å‹ï¼š
- `bool`ï¼šç”¨äºå­˜å‚¨å¸ƒå°”å€¼ï¼ˆtrue æˆ– falseï¼‰ã€‚

```solidity
bool public isActive = true;
```

#### å­—ç¬¦ä¸²ç±»å‹ï¼š
- `string`ï¼šç”¨äºå­˜å‚¨ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚

```solidity
string public name = "Alice";
```

### 4.2 æ•°ç»„ä¸æ˜ å°„

#### æ•°ç»„ï¼š
- å›ºå®šå¤§å°æ•°ç»„ï¼š`type[size]`
- åŠ¨æ€å¤§å°æ•°ç»„ï¼š`type[]`

```solidity
uint[3] public fixedArray = [1, 2, 3];
uint[] public dynamicArray = [1, 2, 3, 4];
```

#### æ˜ å°„ï¼š
- `mapping(keyType => valueType)`ï¼šç±»ä¼¼äºå“ˆå¸Œè¡¨æˆ–å­—å…¸ã€‚

```solidity
mapping(address => uint) public balances;
```

### 4.3 storage vs memory

Solidity ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„æ•°æ®ä½ç½®ï¼š

- **storage**ï¼šæŒä¹…åŒ–å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šï¼Œé€‚ç”¨äºçŠ¶æ€å˜é‡ã€‚
- **memory**ï¼šä¸´æ—¶å­˜å‚¨ï¼Œä»…åœ¨å‡½æ•°è°ƒç”¨æœŸé—´å­˜åœ¨ï¼Œé€‚ç”¨äºå±€éƒ¨å˜é‡ã€‚

```solidity
contract Example {
    uint[] public storageArray; // å­˜å‚¨åœ¨ storage ä¸­
    
    function exampleFunction(uint[] memory inputArray) public {
        // inputArray åªå­˜åœ¨äºå†…å­˜ä¸­
        storageArray = inputArray; // å°†å†…å­˜ä¸­çš„æ•°æ®å¤åˆ¶åˆ° storage
    }
}
```

---

## ç¬¬5ç« ï¼šå‡½æ•°ä¸æƒé™æ§åˆ¶

### 5.1 å‡½æ•°å¯è§æ€§

Solidity æä¾›äº†å››ç§ä¸åŒçš„å‡½æ•°å¯è§æ€§ä¿®é¥°ç¬¦ï¼š

- **public**ï¼šå¯ä»¥ä»å¤–éƒ¨å’Œåˆçº¦å†…éƒ¨è®¿é—®ã€‚
- **private**ï¼šåªèƒ½ä»åˆçº¦å†…éƒ¨è®¿é—®ã€‚
- **internal**ï¼šåªèƒ½ä»å½“å‰åˆçº¦åŠå…¶æ´¾ç”Ÿåˆçº¦è®¿é—®ã€‚
- **external**ï¼šåªèƒ½ä»å¤–éƒ¨è®¿é—®ï¼Œä¸èƒ½ä»åˆçº¦å†…éƒ¨è°ƒç”¨ã€‚

```solidity
contract Example {
    function publicFunc() public view returns (uint) { return 1; }
    function privateFunc() private pure returns (uint) { return 2; }
    function internalFunc() internal pure returns (uint) { return 3; }
    function externalFunc() external pure returns (uint) { return 4; }
}
```

### 5.2 å‡½æ•°çŠ¶æ€å¯å˜æ€§

Solidity è¿˜æä¾›äº†ä¸‰ç§å‡½æ•°çŠ¶æ€å¯å˜æ€§ä¿®é¥°ç¬¦ï¼š

- **view**ï¼šå£°æ˜è¯¥å‡½æ•°ä¸ä¼šä¿®æ”¹çŠ¶æ€ã€‚
- **pure**ï¼šå£°æ˜è¯¥å‡½æ•°æ—¢ä¸è¯»å–ä¹Ÿä¸ä¿®æ”¹çŠ¶æ€ã€‚
- **payable**ï¼šå…è®¸å‡½æ•°æ¥æ”¶ä»¥å¤ªå¸ã€‚

```solidity
contract Example {
    function viewFunc() public view returns (uint) { return 1; }
    function pureFunc() public pure returns (uint) { return 2; }
    function payableFunc() public payable returns (uint) { return msg.value; }
}
```

### 5.3 æƒé™ä¿®é¥°ç¬¦

é€šè¿‡ä½¿ç”¨ `modifier` å…³é”®å­—ï¼Œä½ å¯ä»¥å®šä¹‰è‡ªå®šä¹‰æƒé™æ£€æŸ¥é€»è¾‘ï¼Œä»è€Œç®€åŒ–ä»£ç å¹¶æé«˜å®‰å…¨æ€§ã€‚

```solidity
contract Example {
    address public owner;

    modifier onlyOwner() {
        require(msg.sender == owner, "Not owner");
        _;
    }

    constructor() {
        owner = msg.sender;
    }

    function restrictedFunction() public onlyOwner {
        // ä»…å½“è°ƒç”¨è€…æ˜¯åˆçº¦æ‰€æœ‰è€…æ—¶æ‰èƒ½æ‰§è¡Œæ­¤å‡½æ•°
    }
}
```

---

## ç¬¬6ç« ï¼šäº‹ä»¶ï¼ˆEventsï¼‰ä¸æ—¥å¿—

äº‹ä»¶ï¼ˆEventsï¼‰æ˜¯ Solidity ä¸­è®°å½•æ—¥å¿—çš„ä¸€ç§æ–¹å¼ï¼Œå¸¸ç”¨äºé€šçŸ¥å‰ç«¯åº”ç”¨ç¨‹åºåˆçº¦çŠ¶æ€çš„å˜åŒ–ã€‚

### 6.1 å®šä¹‰å’Œè§¦å‘äº‹ä»¶

```solidity
contract Example {
    event Deposit(address indexed user, uint amount);

    function deposit() public payable {
        emit Deposit(msg.sender, msg.value);
    }
}
```

### 6.2 å‰ç«¯ç›‘å¬äº‹ä»¶

åœ¨å‰ç«¯åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ Web3.js ç›‘å¬åˆçº¦äº‹ä»¶ï¼š

```javascript
const contract = new web3.eth.Contract(abi, contractAddress);

contract.events.Deposit({
    filter: {user: userAddress},
    fromBlock: 'latest'
}, (error, event) => {
    console.log(event);
});
```

---

## ç¬¬7ç« ï¼šåˆçº¦ç”Ÿå‘½å‘¨æœŸ

### 7.1 æ„é€ å‡½æ•°

æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–åˆçº¦çš„çŠ¶æ€ï¼Œåœ¨åˆçº¦éƒ¨ç½²æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚

```solidity
contract Example {
    address public owner;

    constructor() {
        owner = msg.sender;
    }
}
```

### 7.2 åˆçº¦ç»§æ‰¿ä¸å¤ç”¨ä»£ç 

é€šè¿‡ä½¿ç”¨ `is` å…³é”®å­—ï¼Œä½ å¯ä»¥è®©ä¸€ä¸ªåˆçº¦ç»§æ‰¿å¦ä¸€ä¸ªåˆçº¦çš„åŠŸèƒ½ã€‚

```solidity
contract BaseContract {
    function baseFunction() public pure returns (uint) { return 1; }
}

contract DerivedContract is BaseContract {
    function derivedFunction() public pure returns (uint) { return 2; }
}
```

### 7.3 åˆçº¦é”€æ¯

ä½¿ç”¨ `selfdestruct` æ–¹æ³•å¯ä»¥é”€æ¯åˆçº¦å¹¶å°†å…¶å‰©ä½™çš„ä»¥å¤ªå¸å‘é€åˆ°æŒ‡å®šåœ°å€ã€‚

```solidity
contract Example {
    address public owner;

    constructor() {
        owner = msg.sender;
    }

    function destroy() public {
        require(msg.sender == owner, "Only owner can destroy this contract");
        selfdestruct(payable(owner));
    }
}
```

å½“ç„¶å¯ä»¥ï¼æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›å…¥**ç¬¬äº”éƒ¨åˆ†ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„ DApp**ã€‚è¿™ä¸€éƒ¨åˆ†å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä»å‰ç«¯è¿æ¥æ™ºèƒ½åˆçº¦ï¼Œå¹¶æœ€ç»ˆå®Œæˆä¸€ä¸ªå®Œæ•´çš„å»ä¸­å¿ƒåŒ–åº”ç”¨ï¼ˆDAppï¼‰çš„å¼€å‘ã€‚

---

## ç¬¬8ç« ï¼šå¼‚å¸¸å¤„ç†ä¸å®‰å…¨æ€§

---

### 8.1 requireã€assert å’Œ revert çš„åŒºåˆ«

Solidity æä¾›äº†ä¸‰ç§ç”¨äºè§¦å‘å¼‚å¸¸çš„æ–¹å¼ï¼š`require`ã€`revert` å’Œ `assert`ï¼Œå®ƒä»¬éƒ½èƒ½å›æ»šçŠ¶æ€å˜æ›´å¹¶æŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œä½†åœ¨ç”¨é€”å’Œ Gas å¤„ç†ä¸Šæœ‰æ‰€ä¸åŒã€‚

| å…³é”®å­—                          | ç”¨é€”               | Gas å¤„ç†         | æ˜¯å¦æ¨è         |
| ------------------------------- | ------------------ | ---------------- | ---------------- |
| `require(condition, "message")` | è¾“å…¥éªŒè¯ã€æ¡ä»¶æ£€æŸ¥ | é€€å›æœªä½¿ç”¨çš„ Gas | âœ… å¼ºçƒˆæ¨è       |
| `revert("message")`             | ä¸»åŠ¨ä¸­æ­¢æ‰§è¡Œ       | é€€å›æœªä½¿ç”¨çš„ Gas | âœ… æ¨è           |
| `assert(condition)`             | å†…éƒ¨é”™è¯¯ã€æ–­è¨€å¤±è´¥ | ä¸é€€å› Gas       | âš ï¸ ä»…ç”¨äºä¸¥é‡é”™è¯¯ |

ç¤ºä¾‹ï¼š

```solidity
function transfer(address to, uint amount) public {
    require(amount > 0, "Amount must be greater than zero");
    if (amount > balance[msg.sender]) {
        revert("Insufficient balance");
    }
    assert(to != address(0)); // ä»…ç”¨äºé˜²æ­¢ä¸¥é‡é”™è¯¯
}
```

---

### 8.2 é¿å…å¸¸è§æ¼æ´ï¼ˆå¦‚é‡å…¥æ”»å‡»ã€æº¢å‡ºé—®é¢˜ï¼‰

#### 1. é‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰

åŸç†ï¼š

æ”»å‡»è€…é€šè¿‡é€’å½’è°ƒç”¨åˆçº¦ä¸­çš„å‡½æ•°ï¼Œåœ¨åˆçº¦è¿˜æœªå®Œæˆå½“å‰é€»è¾‘å‰é‡å¤æå–èµ„é‡‘ã€‚

ç¤ºä¾‹ï¼ˆå±é™©ï¼‰ï¼š

```solidity
function withdraw() public {
    uint balance = balances[msg.sender];
    (bool sent, ) = msg.sender.call{value: balance}("");
    require(sent, "Failed to send Ether");
    balances[msg.sender] = 0;
}
```

ä¿®å¤æ–¹æ¡ˆï¼ˆChecks-Effects-Interactions æ¨¡å¼ï¼‰ï¼š

```solidity
function withdraw() public {
    uint balance = balances[msg.sender];
    balances[msg.sender] = 0; // Effects å…ˆæ‰§è¡Œ
    (bool sent, ) = msg.sender.call{value: balance}(""); // Interactions æœ€åæ‰§è¡Œ
    require(sent, "Failed to send Ether");
}
```

---

#### 2. æ•´æ•°æº¢å‡ºï¼ˆInteger Overflow / Underflowï¼‰

åŸç†ï¼š

åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼ŒSolidity ä¸è‡ªåŠ¨æ£€æŸ¥æ•´æ•°æº¢å‡ºï¼Œå¯èƒ½å¯¼è‡´ä½™é¢å˜ä¸ºè´Ÿæ•°æˆ–éå¸¸å¤§çš„æ•°å€¼ã€‚

è§£å†³æ–¹æ¡ˆï¼š

- ä½¿ç”¨ OpenZeppelin çš„ SafeMath åº“ï¼ˆSolidity â‰¥ 0.8.0 å·²é»˜è®¤å¯ç”¨æº¢å‡ºæ£€æŸ¥ï¼‰

```solidity
import "@openzeppelin/contracts/utils/math/SafeMath.sol";

using SafeMath for uint256;

function add(uint256 a, uint256 b) public pure returns (uint256) {
    return a.add(b);
}
```

---

#### 3. å…¶ä»–å¸¸è§æ¼æ´

| æ¼æ´ç±»å‹                  | æè¿°                                    | é˜²å¾¡æ–¹æ³•                  |
| ------------------------- | --------------------------------------- | ------------------------- |
| å‰å°è¿è¡Œï¼ˆFront Runningï¼‰ | åˆ©ç”¨äº¤æ˜“å¯è§æ€§æŠ¢å…ˆæ‰§è¡Œ                  | ä½¿ç”¨éšæœºæ€§æˆ–åŠ å¯†æäº¤æœºåˆ¶  |
| æ—¶é—´æˆ³ä¾èµ–                | ä½¿ç”¨ `block.timestamp` ä½œä¸ºå”¯ä¸€åˆ¤æ–­ä¾æ® | é¿å…ç›´æ¥ä¾èµ–æ—¶é—´æˆ³        |
| ç­¾åé‡æ”¾æ”»å‡»              | é‡å¤ä½¿ç”¨ç­¾å                            | æ·»åŠ  nonce å­—æ®µéªŒè¯å”¯ä¸€æ€§ |

---

## ç¬¬9ç« ï¼šå¤–éƒ¨æ¥å£ä¸ ABI

---

## 9.1 è‡ªåŠ¨ç”Ÿæˆ ABI æ–‡ä»¶

ABIï¼ˆApplication Binary Interfaceï¼‰æ˜¯æè¿°åˆçº¦æ¥å£çš„ JSON æ–‡ä»¶ï¼Œå®šä¹‰äº†å‡½æ•°ã€äº‹ä»¶ã€å‚æ•°ç±»å‹ç­‰ä¿¡æ¯ï¼Œä½¿å¾—å¤–éƒ¨åº”ç”¨èƒ½å¤Ÿæ­£ç¡®è°ƒç”¨æ™ºèƒ½åˆçº¦ã€‚

ABI æ–‡ä»¶ç»“æ„ç¤ºä¾‹ï¼š

```json
[
  {
    "constant": false,
    "inputs": [
      { "name": "_to", "type": "address" },
      { "name": "_amount", "type": "uint256" }
    ],
    "name": "transfer",
    "outputs": [],
    "payable": false,
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
```

ç”Ÿæˆæ–¹å¼ï¼š

- **Hardhat / Foundry**ï¼šç¼–è¯‘åˆçº¦æ—¶è‡ªåŠ¨ç”Ÿæˆ `artifacts/contracts/YourContract.json`
- **Remix IDE**ï¼šç‚¹å‡» â€œCompileâ€ åå¯åœ¨è¯¦æƒ…ä¸­å¤åˆ¶ ABI

---

## 9.2 ä¸å‰ç«¯åº”ç”¨é›†æˆçš„æ–¹å¼

å‰ç«¯å¦‚ä½•ä¸åˆçº¦é€šä¿¡ï¼Ÿ

å‰ç«¯åº”ç”¨ï¼ˆå¦‚ Reactã€Vueï¼‰é€šè¿‡ Web3 æä¾›å•†ï¼ˆå¦‚ Metamaskï¼‰è¿æ¥åŒºå—é“¾ç½‘ç»œï¼Œå¹¶ä½¿ç”¨ ABI æ–‡ä»¶ä¸æ™ºèƒ½åˆçº¦äº¤äº’ã€‚

å¸¸è§é›†æˆæ­¥éª¤ï¼š

1. **è·å– ABI å’Œåˆçº¦åœ°å€**
2. **åˆ›å»ºåˆçº¦å®ä¾‹**
3. **è°ƒç”¨åˆçº¦å‡½æ•°ï¼ˆview/pureï¼‰æˆ–å‘é€äº¤æ˜“ï¼ˆstate-changingï¼‰**

---

## 9.3 ç¤ºä¾‹ï¼šé€šè¿‡ Web3.js æˆ– Ethers.js ä¸åˆçº¦äº’åŠ¨

#### ä½¿ç”¨ Web3.js è°ƒç”¨åˆçº¦å‡½æ•°

```javascript
const contract = new web3.eth.Contract(abi, contractAddress);

// è°ƒç”¨ view å‡½æ•°
contract.methods.getBalance(account).call().then(console.log);

// å‘é€äº¤æ˜“
contract.methods.transfer(to, amount).send({ from: account });
```

#### ä½¿ç”¨ Ethers.js è°ƒç”¨åˆçº¦å‡½æ•°

```javascript
const provider = new ethers.providers.Web3Provider(window.ethereum);
const signer = provider.getSigner();
const contract = new ethers.Contract(contractAddress, abi, signer);

// è°ƒç”¨ view å‡½æ•°
await contract.getBalance(account);

// å‘é€äº¤æ˜“
await contract.transfer(to, amount);
```

---

## æ€»ç»“

- **ABI æ˜¯åˆçº¦ä¸å¤–ç•Œé€šä¿¡çš„å…³é”®æ¡¥æ¢**
- **Web3.js å’Œ Ethers.js æ˜¯ä¸»æµå‰ç«¯äº¤äº’å·¥å…·**
- **å‰ç«¯åº”ä¸¥æ ¼æ ¡éªŒç”¨æˆ·è¾“å…¥ï¼Œé¿å…å› é”™è¯¯è°ƒç”¨å¼•å‘å¼‚å¸¸**

---

å¦‚æœä½ å¸Œæœ›æˆ‘ç»§ç»­æ‰©å±•æ¯ä¸€ç« å†…å®¹ï¼Œæ¯”å¦‚åŠ å…¥æ›´å¤šå®æˆ˜æ¡ˆä¾‹ã€é¡¹ç›®ç»“æ„ã€å®Œæ•´ç¤ºä¾‹ä»£ç æˆ–å¯è§†åŒ–å›¾è¡¨ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼æˆ‘å¯ä»¥ä¸ºä½ å®šåˆ¶æ•™å­¦ææ–™æˆ–å¼€å‘æ–‡æ¡£ã€‚

---

# ğŸ“˜ ç¬¬äº”éƒ¨åˆ†ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„ DApp

## ç¬¬10ç« ï¼šå‰ç«¯è¿æ¥æ™ºèƒ½åˆçº¦

åœ¨å‰é¢çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•ç¼–å†™å’Œéƒ¨ç½²æ™ºèƒ½åˆçº¦ã€‚ç°åœ¨æˆ‘ä»¬å°†æŠŠè¿™äº›åˆçº¦ä¸å‰ç«¯ç»“åˆèµ·æ¥ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ç•Œé¢æ¥ä¸è¿™äº›åˆçº¦è¿›è¡Œäº¤äº’ã€‚

### 10.1 Web3.js ç®€ä»‹ä¸å®‰è£…

**Web3.js** æ˜¯ä¸€ä¸ªç”¨äºä¸ä»¥å¤ªåŠåŒºå—é“¾äº¤äº’çš„ JavaScript åº“ã€‚å®ƒå…è®¸ä½ ä»æµè§ˆå™¨æˆ– Node.js åº”ç”¨ç¨‹åºä¸­è°ƒç”¨æ™ºèƒ½åˆçº¦æ–¹æ³•ã€å‘é€äº¤æ˜“ç­‰ã€‚

#### å®‰è£…æ­¥éª¤ï¼š

1. **åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆå§‹åŒ– npm åŒ…ç®¡ç†å™¨**ï¼š
   å¦‚æœè¿˜æ²¡æœ‰ `package.json` æ–‡ä»¶ï¼Œé¦–å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
   ```bash
   npm init -y
   ```

2. **å®‰è£… web3.js**ï¼š
   åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Web3.jsï¼š
   ```bash
   npm install web3
   ```

### 10.2 MetaMask é’±åŒ…é›†æˆ

MetaMask æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„æµè§ˆå™¨æ’ä»¶é’±åŒ…ï¼Œå®ƒä½¿å¾—ç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è½»æ¾åœ°ä¸ä»¥å¤ªåŠ dApps è¿›è¡Œäº¤äº’ã€‚

#### é›†æˆæ­¥éª¤ï¼š

1. **æ£€æŸ¥æ˜¯å¦å·²å®‰è£… MetaMask**ï¼š
   ç¡®ä¿ç”¨æˆ·å·²ç»å®‰è£…äº† MetaMask æ’ä»¶ï¼Œå¹¶ä¸”å·²ç»ç™»å½•äº†ä¸€ä¸ªè´¦æˆ·ã€‚

2. **è¿æ¥åˆ° MetaMask æä¾›çš„ Provider**ï¼š
   åœ¨å‰ç«¯ä»£ç ä¸­ä½¿ç”¨ Web3.js è¿æ¥åˆ° MetaMaskï¼š
   ```javascript
   if (window.ethereum) {
     const web3 = new Web3(window.ethereum);
     try {
       // è¯·æ±‚ç”¨æˆ·æˆæƒ
       await window.ethereum.enable();
       console.log('MetaMask å·²è¿æ¥');
     } catch (error) {
       console.error('ç”¨æˆ·æ‹’ç»æˆæƒ:', error);
     }
   } else {
     console.warn('è¯·å®‰è£… MetaMask');
   }
   ```

### 10.3 è°ƒç”¨åˆçº¦æ–¹æ³•

é€šè¿‡ Web3.js å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨åˆçº¦ä¸­çš„æ–¹æ³•ã€‚

#### ç¤ºä¾‹ä»£ç ï¼š

```javascript
// å‡è®¾åˆçº¦ ABI å’Œåœ°å€å¦‚ä¸‹
const contractABI = [ /* ... */ ];
const contractAddress = '0xYourContractAddress';

// åˆ›å»ºåˆçº¦å®ä¾‹
const contract = new web3.eth.Contract(contractABI, contractAddress);

// è°ƒç”¨åªè¯»æ–¹æ³• retrieve()
async function getValue() {
  const value = await contract.methods.retrieve().call();
  console.log('Stored value:', value);
}

// è°ƒç”¨éœ€è¦å‘é€äº¤æ˜“çš„æ–¹æ³• store(uint256 num)
async function setValue(newValue) {
  const accounts = await web3.eth.getAccounts();
  await contract.methods.store(newValue).send({ from: accounts[0] });
  console.log('Value set to:', newValue);
}
```

### 10.4 ç›‘å¬åˆçº¦äº‹ä»¶æ›´æ–°é¡µé¢

æ™ºèƒ½åˆçº¦å¯ä»¥é€šè¿‡è§¦å‘äº‹ä»¶é€šçŸ¥å‰ç«¯åº”ç”¨ç¨‹åºçŠ¶æ€çš„å˜åŒ–ã€‚å‰ç«¯å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶å¹¶å®æ—¶æ›´æ–°é¡µé¢ã€‚

#### ç¤ºä¾‹ä»£ç ï¼š

```javascript
// ç›‘å¬ Deposit äº‹ä»¶
contract.events.Deposit({
  filter: { user: '0x...' }, // å¯é€‰è¿‡æ»¤æ¡ä»¶
  fromBlock: 'latest'
}, (error, event) => {
  if (error) {
    console.error('Error:', error);
  } else {
    console.log('Event received:', event);
    // æ›´æ–°é¡µé¢æ˜¾ç¤º
  }
});
```

---

## ç¬¬11ç« ï¼šå®æˆ˜é¡¹ç›® â€”â€” TodoList DApp

åœ¨è¿™ä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„ Todo List åº”ç”¨ç¨‹åºä½œä¸ºå®æˆ˜é¡¹ç›®ï¼Œè¯¥åº”ç”¨å…è®¸ç”¨æˆ·æ·»åŠ ã€åˆ é™¤å’ŒæŸ¥çœ‹å¾…åŠäº‹é¡¹ã€‚

### 11.1 åŠŸèƒ½éœ€æ±‚åˆ†æ

- **æ·»åŠ å¾…åŠäº‹é¡¹**ï¼šç”¨æˆ·å¯ä»¥è¾“å…¥æ–°çš„å¾…åŠäº‹é¡¹å¹¶ä¿å­˜ã€‚
- **æŸ¥çœ‹å¾…åŠäº‹é¡¹åˆ—è¡¨**ï¼šå±•ç¤ºæ‰€æœ‰å¾…åŠäº‹é¡¹ã€‚
- **åˆ é™¤å¾…åŠäº‹é¡¹**ï¼šå¯ä»¥ä»åˆ—è¡¨ä¸­ç§»é™¤æŸä¸€é¡¹å¾…åŠäº‹é¡¹ã€‚
- **å­˜å‚¨åœ¨åŒºå—é“¾ä¸Š**ï¼šæ‰€æœ‰çš„å¾…åŠäº‹é¡¹éƒ½å°†å­˜å‚¨åœ¨æ™ºèƒ½åˆçº¦ä¸­ã€‚

### 11.2 åˆçº¦è®¾è®¡

é¦–å…ˆæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªæ™ºèƒ½åˆçº¦æ¥å®ç°ä¸Šè¿°åŠŸèƒ½ã€‚

#### ç¤ºä¾‹åˆçº¦ä»£ç ï¼š

```solidity
pragma solidity ^0.8.0;

contract TodoList {
    struct Task {
        string content;
        bool completed;
    }

    Task[] public tasks;

    function createTask(string memory _content) public {
        tasks.push(Task({
            content: _content,
            completed: false
        }));
    }

    function toggleCompleted(uint _index) public {
        require(_index < tasks.length, "ä»»åŠ¡ç´¢å¼•è¶…å‡ºèŒƒå›´");
        tasks[_index].completed = !tasks[_index].completed;
    }

    function getTasksCount() public view returns (uint) {
        return tasks.length;
    }
}
```

### 11.3 ä½¿ç”¨ Truffle éƒ¨ç½²åˆçº¦

æŒ‰ç…§ä¹‹å‰ä»‹ç»çš„æ–¹æ³•ï¼Œç¼–å†™è¿ç§»è„šæœ¬å¹¶å°†åˆçº¦éƒ¨ç½²åˆ°æœ¬åœ° Ganache æˆ–å…¶ä»–æµ‹è¯•ç½‘ç»œã€‚

#### ç¤ºä¾‹è¿ç§»è„šæœ¬ï¼š

```javascript
const TodoList = artifacts.require("TodoList");

module.exports = function(deployer) {
  deployer.deploy(TodoList);
};
```

ç„¶åè¿è¡Œï¼š
```bash
truffle migrate --network development
```

### 11.4 å‰ç«¯é¡µé¢æ­å»º

ä½¿ç”¨ HTML å’Œ JavaScript æ„å»ºå‰ç«¯é¡µé¢ï¼Œä½¿å…¶èƒ½å¤Ÿä¸åˆçº¦äº¤äº’ã€‚

#### ç¤ºä¾‹ HTML é¡µé¢ï¼š

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Todo List DApp</title>
</head>
<body>
  <h1>Todo List</h1>
  <input id="taskInput" type="text" placeholder="è¯·è¾“å…¥å¾…åŠäº‹é¡¹">
  <button onclick="addTask()">æ·»åŠ </button>
  <ul id="taskList"></ul>

  <script src="./node_modules/web3/dist/web3.min.js"></script>
  <script src="./app.js"></script>
</body>
</html>
```

#### ç¤ºä¾‹ JavaScript (`app.js`)ï¼š

```javascript
if (window.ethereum) {
  const web3 = new Web3(window.ethereum);
  window.ethereum.enable();

  const contractABI = [ /* ... */ ]; // æ›¿æ¢ä¸ºå®é™…çš„ ABI
  const contractAddress = '0xYourContractAddress';
  const contract = new web3.eth.Contract(contractABI, contractAddress);

  async function loadTasks() {
    const taskCount = await contract.methods.getTasksCount().call();
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = ''; // æ¸…ç©ºç°æœ‰åˆ—è¡¨
    for (let i = 0; i < taskCount; i++) {
      const task = await contract.methods.tasks(i).call();
      const li = document.createElement('li');
      li.textContent = `${i + 1}. ${task.content} (${task.completed ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ'})`;
      taskList.appendChild(li);
    }
  }

  async function addTask() {
    const input = document.getElementById('taskInput');
    const content = input.value;
    const accounts = await web3.eth.getAccounts();
    await contract.methods.createTask(content).send({ from: accounts[0] });
    loadTasks();
    input.value = '';
  }

  loadTasks();
} else {
  console.warn('è¯·å®‰è£… MetaMask');
}
```

### 11.5 ä¸åˆçº¦äº¤äº’çš„å®Œæ•´æµç¨‹æ¼”ç¤º

1. **å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
   å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ Python æˆ–ä»»ä½•å…¶ä»–å·¥å…·æ¥å¯åŠ¨ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ï¼š
   ```bash
   python3 -m http.server 8080
   ```

2. **æ‰“å¼€æµè§ˆå™¨è®¿é—®é¡µé¢**ï¼š
   è®¿é—® `http://localhost:8080`ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ä½ çš„ Todo List åº”ç”¨ã€‚

3. **æ·»åŠ æ–°ä»»åŠ¡**ï¼š
   è¾“å…¥å¾…åŠäº‹é¡¹å¹¶ç‚¹å‡»â€œæ·»åŠ â€æŒ‰é’®ï¼Œè§‚å¯Ÿé¡µé¢è‡ªåŠ¨æ›´æ–°å¹¶æ˜¾ç¤ºæ–°ä»»åŠ¡ã€‚

4. **æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨**ï¼š
   åˆ·æ–°é¡µé¢åï¼Œæ‰€æœ‰å·²æ·»åŠ çš„ä»»åŠ¡åº”ä¾ç„¶å­˜åœ¨ï¼Œå› ä¸ºå®ƒä»¬è¢«å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šã€‚

---

## ğŸ” ç¬¬å…­éƒ¨åˆ†ï¼šå®‰å…¨ä¸è¿›é˜¶å»ºè®®ï¼ˆçœç•¥ï¼‰

è¿™éƒ¨åˆ†å†…å®¹å°†æä¾›ä¸€äº›å…³äºæ™ºèƒ½åˆçº¦å®‰å…¨æ€§çš„åŸºæœ¬çŸ¥è¯†ä»¥åŠè¿›ä¸€æ­¥å­¦ä¹ çš„æ–¹å‘ã€‚

### ç¬¬12ç« ï¼šå¸¸è§å®‰å…¨é—®é¢˜ä¸é˜²èŒƒ

#### é‡å…¥æ”»å‡»ï¼ˆReentrancy Attackï¼‰
- **å®šä¹‰**ï¼šå½“æ¶æ„åˆçº¦åˆ©ç”¨å›è°ƒæœºåˆ¶åå¤è°ƒç”¨ç›®æ ‡åˆçº¦ä¸­çš„å‡½æ•°ï¼Œå¯¼è‡´èµ„é‡‘è¢«ç›—ã€‚
- **é˜²èŒƒæªæ–½**ï¼šä½¿ç”¨ Checks-Effects-Interactions æ¨¡å¼ï¼›åœ¨è½¬è´¦å‰æ ‡è®°çŠ¶æ€ã€‚

#### æ•´æ•°æº¢å‡ºä¸ä¸‹æº¢
- **Solidity 0.8+ è‡ªåŠ¨æ£€æŸ¥**ï¼šä¸å†éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚

#### æƒé™ç®¡ç†ï¼ˆOwnable æ¨¡å¼ï¼‰
- **æ§åˆ¶åˆçº¦è®¿é—®æƒé™**ï¼šç¡®ä¿åªæœ‰ç‰¹å®šè´¦æˆ·æ‰èƒ½æ‰§è¡ŒæŸäº›æ“ä½œã€‚

### ç¬¬13ç« ï¼šä¸‹ä¸€æ­¥è¯¥å­¦ä»€ä¹ˆï¼Ÿ

#### å¯å‡çº§åˆçº¦ï¼ˆProxy Patternï¼‰
- **UUPS, Transparent Proxy**ï¼šäº†è§£å¦‚ä½•ä½¿åˆçº¦å…·æœ‰å¯å‡çº§æ€§ã€‚

#### ERC æ ‡å‡†
- **ERC-20, ERC-721**ï¼šå­¦ä¹ å‘è¡Œä»£å¸çš„æ ‡å‡†ã€‚

#### æ›´é«˜çº§çš„å¼€å‘å·¥å…·
- **Hardhat, Foundry**ï¼šæ¢ç´¢æ›´å¤šå¼€å‘æ¡†æ¶å’Œå·¥å…·ã€‚

#### å­¦ä¹  DeFi, NFT, DAO ç­‰çƒ­é—¨æ–¹å‘
- **æ·±å…¥ç ”ç©¶å»ä¸­å¿ƒåŒ–é‡‘èã€éåŒè´¨åŒ–ä»£å¸å’Œå»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡ç­‰é¢†åŸŸ**ã€‚

---

